---
layout: single
categories: ['K-DATA']
tags: ['python','folium']
last_modified_at : 2021-07-08
---

# folium을 이용한 개선시급지역 시각화

```python
import pandas as pd
from pandas import Series, DataFrame
import numpy as np
import matplotlib
matplotlib.rcParams['font.family'].insert(0, 'Malgun Gothic') 
%matplotlib inline
```

# Open API 활용하여 데이터 가져오기


```python
import requests
```


```python
response=requests.get('http://openapi.seoul.go.kr:8088/sample/xml/VwsmTrdarFlpopQq/1/5/')
```


```python
#response.text
```


```python
response=requests.get('http://openapi.seoul.go.kr:8088/sample/json/VwsmTrdarFlpopQq/1/5/') # xml -> json
```


```python
#response.text
```


```python
type(response.text)
```




    str



* json (Java Script Object Notation)
 - 키(Key)와 값(Value)로 이루어진 데이터 객체
 - 파이썬의 사전(Dict) 데이터 타입과 동일
 - json online editor: https://jsoneditoronline.org/


```python
# json test를 사전 타입으로 읽어오기
import json
data = json.loads(response.text)
```


```python
type(data)
```




    dict




```python
#data
```


```python
data['VwsmTrdarFlpopQq']['row'][0]['TRDAR_SE_CD_NM']
```




    '골목상권'




```python
# json 데이터 구조 파악
# https://jsoneditoronline.org/ 
```

# 데이터 실전 분석: 서울시 유동인구 분석

## 1. 데이터 적재


```python
유동인구 = pd.read_excel('data/서울시유동인구/0_유동인구_유동인구기본_2015.xlsx', skiprows=[0, 1, 3])
```


```python
location = pd.read_excel('data/서울시유동인구/4_유동인구_조사지점정보_2015.xlsx', sheet_name=None,
                         skiprows=[0, 1, 3])
```


```python
location.keys()
```




    dict_keys(['유동인구_조사지점정보_2015', 'FTPTH_STLE_CN', 'GU_CD', 'DONG_CD', 'SM_GU_CD'])




```python
조사지점 = location['유동인구_조사지점정보_2015']
구코드 = location['GU_CD']
동코드 = location.get('DONG_CD')
집계구코드 = location.get('SM_GU_CD')
```


```python
유동인구.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID유동인구조사</th>
      <th>조사지점코드</th>
      <th>조사구분</th>
      <th>조사요일</th>
      <th>시간대</th>
      <th>유동인구수</th>
      <th>년도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>30-001</td>
      <td>지하철</td>
      <td>금</td>
      <td>07시-08시</td>
      <td>129.0</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>30-001</td>
      <td>지하철</td>
      <td>금</td>
      <td>08시-09시</td>
      <td>112.5</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>30-001</td>
      <td>지하철</td>
      <td>금</td>
      <td>09시-10시</td>
      <td>108.0</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>30-001</td>
      <td>지하철</td>
      <td>금</td>
      <td>10시-11시</td>
      <td>94.5</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>30-001</td>
      <td>지하철</td>
      <td>금</td>
      <td>11시-12시</td>
      <td>87.0</td>
      <td>2015</td>
    </tr>
  </tbody>
</table>
</div>




```python
조사지점.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>조사지점코드</th>
      <th>조사지점명</th>
      <th>구코드</th>
      <th>동코드</th>
      <th>주번지</th>
      <th>부번지</th>
      <th>도로명</th>
      <th>보도너비</th>
      <th>차선수</th>
      <th>버스차로유무</th>
      <th>...</th>
      <th>지구중심상세내용</th>
      <th>도심부도심지역명</th>
      <th>용도구분</th>
      <th>거주유형구분</th>
      <th>입지유형명</th>
      <th>X좌표</th>
      <th>Y좌표</th>
      <th>집계구코드</th>
      <th>년도</th>
      <th>조사구분</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01-003</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>127</td>
      <td>11</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>8.0</td>
      <td>유</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2종주거</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>1.101055e+12</td>
      <td>2015</td>
      <td>본조사</td>
    </tr>
    <tr>
      <th>1</th>
      <td>01-004</td>
      <td>GS25</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>94</td>
      <td>2</td>
      <td>세검정로 230</td>
      <td>3.0</td>
      <td>7.0</td>
      <td>유</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2종주거</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>196315.80243</td>
      <td>455621.38262</td>
      <td>1.101055e+12</td>
      <td>2015</td>
      <td>본조사</td>
    </tr>
    <tr>
      <th>2</th>
      <td>01-005</td>
      <td>세검정정류장</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>92</td>
      <td>0</td>
      <td>세검정길</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>유</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1종주거</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>196357.17125</td>
      <td>455680.82580</td>
      <td>1.101055e+12</td>
      <td>2015</td>
      <td>본조사</td>
    </tr>
    <tr>
      <th>3</th>
      <td>01-008</td>
      <td>안성타워內 굿모닝파워공인중개사.</td>
      <td>11010.0</td>
      <td>1101056.0</td>
      <td>72</td>
      <td>72</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>유</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2종주거</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>197904.19277</td>
      <td>456718.34996</td>
      <td>1.101056e+12</td>
      <td>2015</td>
      <td>본조사</td>
    </tr>
    <tr>
      <th>4</th>
      <td>01-009</td>
      <td>복실 손뜨기.</td>
      <td>11010.0</td>
      <td>1101056.0</td>
      <td>88</td>
      <td>46</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>7.0</td>
      <td>유</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2종주거</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>196360.44943</td>
      <td>456405.89296</td>
      <td>1.101056e+12</td>
      <td>2015</td>
      <td>본조사</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 37 columns</p>
</div>



## 2. 데이터 탐색 

### 2.1 유동인구 데이터 탐색


```python
유동인구.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 102956 entries, 0 to 102955
    Data columns (total 7 columns):
     #   Column    Non-Null Count   Dtype  
    ---  ------    --------------   -----  
     0   ID유동인구조사  102956 non-null  int64  
     1   조사지점코드    102956 non-null  object 
     2   조사구분      102956 non-null  object 
     3   조사요일      102956 non-null  object 
     4   시간대       102956 non-null  object 
     5   유동인구수     102956 non-null  float64
     6   년도        102956 non-null  int64  
    dtypes: float64(1), int64(2), object(4)
    memory usage: 5.5+ MB
    


```python
# 조사구분이 본조사인 데이터만 선택
유동인구 = 유동인구[유동인구.조사구분 == '본조사']
```


```python
# 목요일 정보를 화요일로 변경
유동인구.조사요일 = 유동인구.조사요일.replace('목','화')
```


```python
columns = ['조사구분', '조사요일', '시간대']
for col in columns:
    print(유동인구[col].value_counts())
    print()
```

    본조사    85890
    Name: 조사구분, dtype: int64
    
    금    17178
    수    17178
    월    17178
    토    17178
    화    17178
    Name: 조사요일, dtype: int64
    
    07시-08시    6135
    08시-09시    6135
    09시-10시    6135
    10시-11시    6135
    11시-12시    6135
    12시-13시    6135
    13시-14시    6135
    14시-15시    6135
    15시-16시    6135
    16시-17시    6135
    17시-18시    6135
    18시-19시    6135
    19시-20시    6135
    20시-21시    6135
    Name: 시간대, dtype: int64
    
    


```python
# 유동인구 조사지점 개수
len(유동인구.조사지점코드.unique())
```




    1227




```python
# 조사지점별 조사 횟수 확인
유동인구.조사지점코드.value_counts().value_counts()
```




    70    1227
    Name: 조사지점코드, dtype: int64



### 3.2.2 조사지점 데이터 탐색


```python
조사지점.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 1500 entries, 0 to 1499
    Data columns (total 37 columns):
     #   Column    Non-Null Count  Dtype  
    ---  ------    --------------  -----  
     0   조사지점코드    1500 non-null   object 
     1   조사지점명     1500 non-null   object 
     2   구코드       1408 non-null   float64
     3   동코드       1408 non-null   float64
     4   주번지       1418 non-null   object 
     5   부번지       1373 non-null   object 
     6   도로명       1233 non-null   object 
     7   보도너비      1421 non-null   float64
     8   차선수       1421 non-null   float64
     9   버스차로유무    1421 non-null   object 
     10  중앙선여부     1421 non-null   object 
     11  장애물유무     1421 non-null   object 
     12  장애물종류     1421 non-null   object 
     13  보행도로구분    1421 non-null   object 
     14  점자블록유무    1421 non-null   object 
     15  경사로유무     1421 non-null   object 
     16  펜스유무      1421 non-null   object 
     17  버스정류장유무   1421 non-null   object 
     18  기타시설유무    0 non-null      float64
     19  지하철유무     1421 non-null   object 
     20  횡단보도유무    1421 non-null   object 
     21  보도형태      0 non-null      float64
     22  글로벌존지역명   0 non-null      float64
     23  주거지역명     0 non-null      float64
     24  지역중심명     0 non-null      float64
     25  지역중심상세명   0 non-null      float64
     26  지구중심명     0 non-null      float64
     27  지구중심상세내용  0 non-null      float64
     28  도심부도심지역명  0 non-null      float64
     29  용도구분      1273 non-null   object 
     30  거주유형구분    0 non-null      float64
     31  입지유형명     0 non-null      float64
     32  X좌표       1413 non-null   float64
     33  Y좌표       1413 non-null   float64
     34  집계구코드     1413 non-null   float64
     35  년도        1500 non-null   int64  
     36  조사구분      1500 non-null   object 
    dtypes: float64(18), int64(1), object(18)
    memory usage: 433.7+ KB
    


```python
# 본조사만 선택
조사지점 = 조사지점[조사지점.조사구분 == '본조사']
```


```python
조사지점.조사구분.value_counts()
```




    본조사    1227
    Name: 조사구분, dtype: int64




```python
# 구코드가 누락된 데이터는 제거
# 해당 데이터는 미활용하기로 결정
조사지점 = 조사지점[조사지점.구코드.notnull()]
```


```python
# 필요한 칼럼만 조사지점에서 선택
조사지점 = 조사지점[['조사지점코드','조사지점명','구코드','동코드','X좌표','Y좌표']]
```

### 3.2.3 데이터 합치기 - 분석에 필요한 컬럼들만 선택 (어떤 분석을 할지에 따라 변경 가능함)


```python
최종데이터 = pd.merge(유동인구, 조사지점)
```


```python
최종데이터.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID유동인구조사</th>
      <th>조사지점코드</th>
      <th>조사구분</th>
      <th>조사요일</th>
      <th>시간대</th>
      <th>유동인구수</th>
      <th>년도</th>
      <th>조사지점명</th>
      <th>구코드</th>
      <th>동코드</th>
      <th>X좌표</th>
      <th>Y좌표</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3067</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>07시-08시</td>
      <td>21.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3068</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>08시-09시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3069</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>09시-10시</td>
      <td>27.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3070</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>10시-11시</td>
      <td>51.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3071</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>11시-12시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
    </tr>
  </tbody>
</table>
</div>




```python
최종데이터 = pd.merge(최종데이터, 구코드[['구코드','구명']])
최종데이터
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID유동인구조사</th>
      <th>조사지점코드</th>
      <th>조사구분</th>
      <th>조사요일</th>
      <th>시간대</th>
      <th>유동인구수</th>
      <th>년도</th>
      <th>조사지점명</th>
      <th>구코드</th>
      <th>동코드</th>
      <th>X좌표</th>
      <th>Y좌표</th>
      <th>구명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3067</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>07시-08시</td>
      <td>21.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3068</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>08시-09시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3069</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>09시-10시</td>
      <td>27.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3070</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>10시-11시</td>
      <td>51.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3071</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>11시-12시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>84835</th>
      <td>88952</td>
      <td>25-815</td>
      <td>본조사</td>
      <td>화</td>
      <td>16시-17시</td>
      <td>672.0</td>
      <td>2015</td>
      <td>현대자동차 성내지점</td>
      <td>11250.0</td>
      <td>1125066.0</td>
      <td>211778.66913</td>
      <td>448392.48055</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>84836</th>
      <td>88953</td>
      <td>25-815</td>
      <td>본조사</td>
      <td>화</td>
      <td>17시-18시</td>
      <td>732.0</td>
      <td>2015</td>
      <td>현대자동차 성내지점</td>
      <td>11250.0</td>
      <td>1125066.0</td>
      <td>211778.66913</td>
      <td>448392.48055</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>84837</th>
      <td>88954</td>
      <td>25-815</td>
      <td>본조사</td>
      <td>화</td>
      <td>18시-19시</td>
      <td>1077.0</td>
      <td>2015</td>
      <td>현대자동차 성내지점</td>
      <td>11250.0</td>
      <td>1125066.0</td>
      <td>211778.66913</td>
      <td>448392.48055</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>84838</th>
      <td>88955</td>
      <td>25-815</td>
      <td>본조사</td>
      <td>화</td>
      <td>19시-20시</td>
      <td>753.0</td>
      <td>2015</td>
      <td>현대자동차 성내지점</td>
      <td>11250.0</td>
      <td>1125066.0</td>
      <td>211778.66913</td>
      <td>448392.48055</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>84839</th>
      <td>88956</td>
      <td>25-815</td>
      <td>본조사</td>
      <td>화</td>
      <td>20시-21시</td>
      <td>546.0</td>
      <td>2015</td>
      <td>현대자동차 성내지점</td>
      <td>11250.0</td>
      <td>1125066.0</td>
      <td>211778.66913</td>
      <td>448392.48055</td>
      <td>강동구</td>
    </tr>
  </tbody>
</table>
<p>84840 rows × 13 columns</p>
</div>




```python
최종데이터 = pd.merge(최종데이터, 동코드[['동코드','동명']])
최종데이터
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID유동인구조사</th>
      <th>조사지점코드</th>
      <th>조사구분</th>
      <th>조사요일</th>
      <th>시간대</th>
      <th>유동인구수</th>
      <th>년도</th>
      <th>조사지점명</th>
      <th>구코드</th>
      <th>동코드</th>
      <th>X좌표</th>
      <th>Y좌표</th>
      <th>구명</th>
      <th>동명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3067</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>07시-08시</td>
      <td>21.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3068</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>08시-09시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3069</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>09시-10시</td>
      <td>27.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3070</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>10시-11시</td>
      <td>51.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3071</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>11시-12시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>84835</th>
      <td>88742</td>
      <td>25-430</td>
      <td>본조사</td>
      <td>화</td>
      <td>16시-17시</td>
      <td>2463.0</td>
      <td>2015</td>
      <td>신동아생활용품DC마트</td>
      <td>11250.0</td>
      <td>1125072.0</td>
      <td>211375.75228</td>
      <td>450168.33297</td>
      <td>강동구</td>
      <td>암사1동</td>
    </tr>
    <tr>
      <th>84836</th>
      <td>88743</td>
      <td>25-430</td>
      <td>본조사</td>
      <td>화</td>
      <td>17시-18시</td>
      <td>2331.0</td>
      <td>2015</td>
      <td>신동아생활용품DC마트</td>
      <td>11250.0</td>
      <td>1125072.0</td>
      <td>211375.75228</td>
      <td>450168.33297</td>
      <td>강동구</td>
      <td>암사1동</td>
    </tr>
    <tr>
      <th>84837</th>
      <td>88744</td>
      <td>25-430</td>
      <td>본조사</td>
      <td>화</td>
      <td>18시-19시</td>
      <td>2160.0</td>
      <td>2015</td>
      <td>신동아생활용품DC마트</td>
      <td>11250.0</td>
      <td>1125072.0</td>
      <td>211375.75228</td>
      <td>450168.33297</td>
      <td>강동구</td>
      <td>암사1동</td>
    </tr>
    <tr>
      <th>84838</th>
      <td>88745</td>
      <td>25-430</td>
      <td>본조사</td>
      <td>화</td>
      <td>19시-20시</td>
      <td>1929.0</td>
      <td>2015</td>
      <td>신동아생활용품DC마트</td>
      <td>11250.0</td>
      <td>1125072.0</td>
      <td>211375.75228</td>
      <td>450168.33297</td>
      <td>강동구</td>
      <td>암사1동</td>
    </tr>
    <tr>
      <th>84839</th>
      <td>88746</td>
      <td>25-430</td>
      <td>본조사</td>
      <td>화</td>
      <td>20시-21시</td>
      <td>1512.0</td>
      <td>2015</td>
      <td>신동아생활용품DC마트</td>
      <td>11250.0</td>
      <td>1125072.0</td>
      <td>211375.75228</td>
      <td>450168.33297</td>
      <td>강동구</td>
      <td>암사1동</td>
    </tr>
  </tbody>
</table>
<p>84840 rows × 14 columns</p>
</div>



## (실습 #1) 유동인구를 시간대 별로 분석하여 시각화하기



```python
ex1 = 최종데이터.pivot_table(index = '시간대', aggfunc = 'mean', values = '유동인구수')
```


```python
ex1.plot()
```




    <AxesSubplot:xlabel='시간대'>




![png](/assets/images/output_43_1.png)



```python
ex1.plot(kind='bar')
```




    <AxesSubplot:xlabel='시간대'>




![png](/assets/images/output_44_1.png)


## (실습 #2) 구별 유동인구 통계 분석 및 시각화
### 구별로 조사지점의 개수가 다르므로, 조사지점 당 평균 유동인구수로 분석


```python
# 구별로 조사지점 개수의 차이가 있는지 확인
최종데이터.pivot_table(index = '구코드', values = '조사지점코드',
                       aggfunc = Series.nunique)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>조사지점코드</th>
    </tr>
    <tr>
      <th>구코드</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>11010.0</th>
      <td>76</td>
    </tr>
    <tr>
      <th>11020.0</th>
      <td>70</td>
    </tr>
    <tr>
      <th>11030.0</th>
      <td>50</td>
    </tr>
    <tr>
      <th>11040.0</th>
      <td>36</td>
    </tr>
    <tr>
      <th>11050.0</th>
      <td>39</td>
    </tr>
    <tr>
      <th>11060.0</th>
      <td>47</td>
    </tr>
    <tr>
      <th>11070.0</th>
      <td>42</td>
    </tr>
    <tr>
      <th>11080.0</th>
      <td>43</td>
    </tr>
    <tr>
      <th>11090.0</th>
      <td>33</td>
    </tr>
    <tr>
      <th>11100.0</th>
      <td>30</td>
    </tr>
    <tr>
      <th>11110.0</th>
      <td>71</td>
    </tr>
    <tr>
      <th>11120.0</th>
      <td>35</td>
    </tr>
    <tr>
      <th>11130.0</th>
      <td>28</td>
    </tr>
    <tr>
      <th>11140.0</th>
      <td>54</td>
    </tr>
    <tr>
      <th>11150.0</th>
      <td>53</td>
    </tr>
    <tr>
      <th>11160.0</th>
      <td>35</td>
    </tr>
    <tr>
      <th>11170.0</th>
      <td>47</td>
    </tr>
    <tr>
      <th>11180.0</th>
      <td>23</td>
    </tr>
    <tr>
      <th>11190.0</th>
      <td>64</td>
    </tr>
    <tr>
      <th>11200.0</th>
      <td>33</td>
    </tr>
    <tr>
      <th>11210.0</th>
      <td>41</td>
    </tr>
    <tr>
      <th>11220.0</th>
      <td>82</td>
    </tr>
    <tr>
      <th>11230.0</th>
      <td>80</td>
    </tr>
    <tr>
      <th>11240.0</th>
      <td>64</td>
    </tr>
    <tr>
      <th>11250.0</th>
      <td>36</td>
    </tr>
  </tbody>
</table>
</div>




```python
구별인구통계 = 최종데이터.pivot_table(index = '구명', values='유동인구수', 
                                      aggfunc = 'mean')
```


```python
구별인구통계.plot(kind='bar')
```




    <AxesSubplot:xlabel='구명'>




![png](/assets/images/output_48_1.png)



```python
구별인구통계.plot(kind='barh')
```




    <AxesSubplot:ylabel='구명'>




![png](/assets/images/output_49_1.png)



```python
# 지도에 시각화
import folium
map1 = folium.Map(location=[37.566535, 126.9779691999996], zoom_start=10,
                  zoom_control=False, control_scale=True,
                  tiles='https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png',
                  attr='&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors')
map1
```




![png](/assets/images/41.png)



```python
# GeoJson으로 행정구역 경계 표시
import json
with open('data/seoul_muncipalities_geo.json', encoding='utf-8') as file:
    geo = json.loads(file.read())
    file.close()
```


```python
구별인구통계.reset_index()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>구명</th>
      <th>유동인구수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>강남구</td>
      <td>478.024821</td>
    </tr>
    <tr>
      <th>1</th>
      <td>강동구</td>
      <td>523.748810</td>
    </tr>
    <tr>
      <th>2</th>
      <td>강북구</td>
      <td>369.967532</td>
    </tr>
    <tr>
      <th>3</th>
      <td>강서구</td>
      <td>304.261224</td>
    </tr>
    <tr>
      <th>4</th>
      <td>관악구</td>
      <td>555.743206</td>
    </tr>
    <tr>
      <th>5</th>
      <td>광진구</td>
      <td>405.991209</td>
    </tr>
    <tr>
      <th>6</th>
      <td>구로구</td>
      <td>482.763830</td>
    </tr>
    <tr>
      <th>7</th>
      <td>금천구</td>
      <td>409.511180</td>
    </tr>
    <tr>
      <th>8</th>
      <td>노원구</td>
      <td>327.557143</td>
    </tr>
    <tr>
      <th>9</th>
      <td>도봉구</td>
      <td>235.841429</td>
    </tr>
    <tr>
      <th>10</th>
      <td>동대문구</td>
      <td>256.464438</td>
    </tr>
    <tr>
      <th>11</th>
      <td>동작구</td>
      <td>596.800000</td>
    </tr>
    <tr>
      <th>12</th>
      <td>마포구</td>
      <td>355.050794</td>
    </tr>
    <tr>
      <th>13</th>
      <td>서대문구</td>
      <td>557.156633</td>
    </tr>
    <tr>
      <th>14</th>
      <td>서초구</td>
      <td>557.379617</td>
    </tr>
    <tr>
      <th>15</th>
      <td>성동구</td>
      <td>371.584524</td>
    </tr>
    <tr>
      <th>16</th>
      <td>성북구</td>
      <td>307.876744</td>
    </tr>
    <tr>
      <th>17</th>
      <td>송파구</td>
      <td>286.147768</td>
    </tr>
    <tr>
      <th>18</th>
      <td>양천구</td>
      <td>361.187062</td>
    </tr>
    <tr>
      <th>19</th>
      <td>영등포구</td>
      <td>380.809821</td>
    </tr>
    <tr>
      <th>20</th>
      <td>용산구</td>
      <td>410.963143</td>
    </tr>
    <tr>
      <th>21</th>
      <td>은평구</td>
      <td>392.635102</td>
    </tr>
    <tr>
      <th>22</th>
      <td>종로구</td>
      <td>799.980451</td>
    </tr>
    <tr>
      <th>23</th>
      <td>중구</td>
      <td>1105.794490</td>
    </tr>
    <tr>
      <th>24</th>
      <td>중랑구</td>
      <td>250.935714</td>
    </tr>
  </tbody>
</table>
</div>




```python
choro = folium.Choropleth(geo_data = geo,
                  name = 'choropleth',
                  data = 구별인구통계.reset_index(),
                  columns = ['구명','유동인구수'],
                  key_on = 'feature.properties.SIG_KOR_NM',
                  legend_name = '인구수',
                  fill_color = 'BuPu').add_to(map1)
```


```python
map1
```




![png](/assets/images/45.png)



```python
# 호버링 시 구이름 나타나게 하기
choro.geojson.add_child(folium.features.GeoJsonTooltip(['SIG_KOR_NM']))
```




    <folium.features.GeoJson at 0x2b3c4918988>




```python
map1
```




![png](/assets/images/47.png)



## (실습 #3) 서울시 각 구별로 출퇴근/그 외 시간의 유동인구 분석 (출퇴근 시간은 7시-10시, 18시-21시로 가정함)



```python
최종데이터.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID유동인구조사</th>
      <th>조사지점코드</th>
      <th>조사구분</th>
      <th>조사요일</th>
      <th>시간대</th>
      <th>유동인구수</th>
      <th>년도</th>
      <th>조사지점명</th>
      <th>구코드</th>
      <th>동코드</th>
      <th>X좌표</th>
      <th>Y좌표</th>
      <th>구명</th>
      <th>동명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3067</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>07시-08시</td>
      <td>21.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3068</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>08시-09시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3069</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>09시-10시</td>
      <td>27.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3070</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>10시-11시</td>
      <td>51.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3071</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>11시-12시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
    </tr>
  </tbody>
</table>
</div>




```python
최종데이터['출퇴근여부'] = 최종데이터.시간대.map({
    '07시-08시' : '출근',
    '08시-09시' : '출근',
    '09시-10시' : '출근',
    '10시-11시' : '일반',
    '11시-12시' : '일반',
    '12시-13시' : '일반',
    '13시-14시' : '일반',
    '14시-15시' : '일반',
    '15시-16시' : '일반',
    '16시-17시' : '일반',
    '17시-18시' : '일반',
    '18시-19시' : '퇴근',
    '19시-20시' : '퇴근',
    '20시-21시' : '퇴근'
})
최종데이터.head(10)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID유동인구조사</th>
      <th>조사지점코드</th>
      <th>조사구분</th>
      <th>조사요일</th>
      <th>시간대</th>
      <th>유동인구수</th>
      <th>년도</th>
      <th>조사지점명</th>
      <th>구코드</th>
      <th>동코드</th>
      <th>X좌표</th>
      <th>Y좌표</th>
      <th>구명</th>
      <th>동명</th>
      <th>출퇴근여부</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3067</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>07시-08시</td>
      <td>21.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>출근</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3068</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>08시-09시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>출근</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3069</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>09시-10시</td>
      <td>27.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>출근</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3070</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>10시-11시</td>
      <td>51.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>일반</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3071</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>11시-12시</td>
      <td>36.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>일반</td>
    </tr>
    <tr>
      <th>5</th>
      <td>3072</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>12시-13시</td>
      <td>48.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>일반</td>
    </tr>
    <tr>
      <th>6</th>
      <td>3073</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>13시-14시</td>
      <td>30.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>일반</td>
    </tr>
    <tr>
      <th>7</th>
      <td>3074</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>14시-15시</td>
      <td>21.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>일반</td>
    </tr>
    <tr>
      <th>8</th>
      <td>3075</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>15시-16시</td>
      <td>30.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>일반</td>
    </tr>
    <tr>
      <th>9</th>
      <td>3076</td>
      <td>01-003</td>
      <td>본조사</td>
      <td>금</td>
      <td>16시-17시</td>
      <td>39.0</td>
      <td>2015</td>
      <td>신흥모피명품전문크리닝.</td>
      <td>11010.0</td>
      <td>1101055.0</td>
      <td>196423.97707</td>
      <td>455511.52968</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>일반</td>
    </tr>
  </tbody>
</table>
</div>




```python
출퇴근시간대유동인구 = 최종데이터.pivot_table(index='구명', columns='출퇴근여부',
                       values='유동인구수', aggfunc='mean')
```


```python
출퇴근시간대유동인구.plot(kind='barh', figsize=(5, 7))
```




    <AxesSubplot:ylabel='구명'>




![png](/assets/images/output_61_1.png)


## (실습 #4) 평일/주말 유동인구 분석 및 시각화



```python
최종데이터.조사요일.value_counts()
```




    금    16968
    수    16968
    월    16968
    토    16968
    화    16968
    Name: 조사요일, dtype: int64




```python
# 월, 화, 수 -> 평일(0)
# 금, 토 -> 주말(1)
```


```python
def 주말여부(x):
    if x in ['월','화','수']:
        return 0
    elif x in ['금','토']:
        return 1
    else:
        return -1
```


```python
최종데이터['주말여부'] = 최종데이터.조사요일.apply(주말여부)
```


```python
# 다른방법
최종데이터['주말여부'] = 최종데이터.조사요일.map({
    '월':0,
    '화':0,
    '수':0,
    '금':1,
    '토':1
})
```


```python
# 평일/주말별 구별 유동인구
ex4 = 최종데이터.pivot_table(index='구명', columns='주말여부',
                 values='유동인구수', aggfunc='mean')
```


```python
ex4.columns = ['평일','주말']
```


```python
ex4
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>평일</th>
      <th>주말</th>
    </tr>
    <tr>
      <th>구명</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>강남구</th>
      <td>481.161607</td>
      <td>473.319643</td>
    </tr>
    <tr>
      <th>강동구</th>
      <td>511.746032</td>
      <td>541.752976</td>
    </tr>
    <tr>
      <th>강북구</th>
      <td>366.655844</td>
      <td>374.935065</td>
    </tr>
    <tr>
      <th>강서구</th>
      <td>307.132653</td>
      <td>299.954082</td>
    </tr>
    <tr>
      <th>관악구</th>
      <td>559.986063</td>
      <td>549.378920</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>398.208791</td>
      <td>417.664835</td>
    </tr>
    <tr>
      <th>구로구</th>
      <td>486.550152</td>
      <td>477.084347</td>
    </tr>
    <tr>
      <th>금천구</th>
      <td>426.372671</td>
      <td>384.218944</td>
    </tr>
    <tr>
      <th>노원구</th>
      <td>326.564386</td>
      <td>329.046278</td>
    </tr>
    <tr>
      <th>도봉구</th>
      <td>237.211905</td>
      <td>233.785714</td>
    </tr>
    <tr>
      <th>동대문구</th>
      <td>257.907295</td>
      <td>254.300152</td>
    </tr>
    <tr>
      <th>동작구</th>
      <td>597.783550</td>
      <td>595.324675</td>
    </tr>
    <tr>
      <th>마포구</th>
      <td>345.541005</td>
      <td>369.315476</td>
    </tr>
    <tr>
      <th>서대문구</th>
      <td>571.933673</td>
      <td>534.991071</td>
    </tr>
    <tr>
      <th>서초구</th>
      <td>551.793554</td>
      <td>565.758711</td>
    </tr>
    <tr>
      <th>성동구</th>
      <td>377.960317</td>
      <td>362.020833</td>
    </tr>
    <tr>
      <th>성북구</th>
      <td>306.342193</td>
      <td>310.178571</td>
    </tr>
    <tr>
      <th>송파구</th>
      <td>279.435268</td>
      <td>296.216518</td>
    </tr>
    <tr>
      <th>양천구</th>
      <td>364.090296</td>
      <td>356.832210</td>
    </tr>
    <tr>
      <th>영등포구</th>
      <td>379.199777</td>
      <td>383.224888</td>
    </tr>
    <tr>
      <th>용산구</th>
      <td>390.315714</td>
      <td>441.934286</td>
    </tr>
    <tr>
      <th>은평구</th>
      <td>392.036735</td>
      <td>393.532653</td>
    </tr>
    <tr>
      <th>종로구</th>
      <td>775.431391</td>
      <td>836.804041</td>
    </tr>
    <tr>
      <th>중구</th>
      <td>1058.997959</td>
      <td>1175.989286</td>
    </tr>
    <tr>
      <th>중랑구</th>
      <td>247.295918</td>
      <td>256.395408</td>
    </tr>
  </tbody>
</table>
</div>




```python
ex4['주말평일차이'] = ex4.주말 - ex4.평일
```


```python
matplotlib.rcParams['axes.unicode_minus'] = False
# 마이너스 표시 깨짐 방지
```


```python
ex4.주말평일차이.sort_values().plot(kind='barh')
```




    <AxesSubplot:ylabel='구명'>




![png](/assets/images/output_73_1.png)


## (실습 #5) 유동인구의 수와 보행환경 정보를 분석 
* 보행환경 정보는 유동인구상세로그_2015.xlsx의 보행환경 컬럼 참고. 매우불만족(1), 약간불만족(2), 보통(3), 약간만족(4), 매우만족(5)
### 5.1 보행 환경 개선이 시급한 곳 10군데를 선정. 


```python
속성조사 = pd.read_excel('data/서울시유동인구/2_유동인구_속성조사_2015.xlsx',
                         skiprows = [0, 1, 3])
```


```python
속성조사.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 20000 entries, 0 to 19999
    Data columns (total 16 columns):
     #   Column     Non-Null Count  Dtype  
    ---  ------     --------------  -----  
     0   ID속성조사     20000 non-null  int64  
     1   조사지점코드     20000 non-null  object 
     2   조사일자       20000 non-null  int64  
     3   조사요일       20000 non-null  object 
     4   남여구분       20000 non-null  object 
     5   조사시간대      0 non-null      float64
     6   조사시간대_텍스트  20000 non-null  object 
     7   연령대        20000 non-null  object 
     8   거주지        19118 non-null  object 
     9   통행주목적      20000 non-null  object 
     10  방문횟수       20000 non-null  object 
     11  동행자명       0 non-null      float64
     12  교통수단       0 non-null      float64
     13  보행환경       20000 non-null  object 
     14  직업명        18574 non-null  object 
     15  년도         20000 non-null  int64  
    dtypes: float64(3), int64(3), object(10)
    memory usage: 2.4+ MB
    


```python
속성조사
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID속성조사</th>
      <th>조사지점코드</th>
      <th>조사일자</th>
      <th>조사요일</th>
      <th>남여구분</th>
      <th>조사시간대</th>
      <th>조사시간대_텍스트</th>
      <th>연령대</th>
      <th>거주지</th>
      <th>통행주목적</th>
      <th>방문횟수</th>
      <th>동행자명</th>
      <th>교통수단</th>
      <th>보행환경</th>
      <th>직업명</th>
      <th>년도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오전11시~오후2시</td>
      <td>50-54세</td>
      <td>종로구</td>
      <td>업무관련</td>
      <td>주1~2회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간만족</td>
      <td>전문/자유직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전11시~오후2시</td>
      <td>60-64세</td>
      <td>성북구</td>
      <td>업무관련</td>
      <td>주3~5회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>매우만족</td>
      <td>일용/작업직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전11시~오후2시</td>
      <td>65세이상</td>
      <td>종로구</td>
      <td>업무관련</td>
      <td>주3~5회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간만족</td>
      <td>일용/작업직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>45-49세</td>
      <td>서대문구</td>
      <td>출근</td>
      <td>매일</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간만족</td>
      <td>사무/기술직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>35-39세</td>
      <td>도봉구</td>
      <td>출근</td>
      <td>매일</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>매우만족</td>
      <td>사무/기술직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>19995</th>
      <td>19996</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오후5시~8시</td>
      <td>20-24세</td>
      <td>NaN</td>
      <td>여가/오락/친교/모임/식사(회식,음료포함)</td>
      <td>오늘처음</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>보통</td>
      <td>(대)학생</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>19996</th>
      <td>19997</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오후5시~8시</td>
      <td>45-49세</td>
      <td>강동구</td>
      <td>여가/오락/친교/모임/식사(회식,음료포함)</td>
      <td>6개월1~3회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>보통</td>
      <td>(전업)주부</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>19997</th>
      <td>19998</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>45-49세</td>
      <td>강동구</td>
      <td>회사또는근무지(사업장등)로복귀</td>
      <td>6개월1~3회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>보통</td>
      <td>판매/서비스직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>19998</th>
      <td>19999</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>40-44세</td>
      <td>강동구</td>
      <td>출근</td>
      <td>주1~2회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간불만족</td>
      <td>일용/작업직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>19999</th>
      <td>20000</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오후5시~8시</td>
      <td>45-49세</td>
      <td>강동구</td>
      <td>개인용무/집안일(병원,은행,관공서,종교활동,봉사활동등)</td>
      <td>월1~2회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>매우불만족</td>
      <td>사무/기술직</td>
      <td>2015</td>
    </tr>
  </tbody>
</table>
<p>20000 rows × 16 columns</p>
</div>




```python
최종데이터.조사지점코드.nunique()
```




    1212




```python
# 조사지점 개수 확인
속성조사.조사지점코드.nunique()
```




    1000




```python
# 전체 조사 다 한건 아님. 전체 1212개 중 딱 1000개만 조사함.
```


```python
속성조사.조사지점코드.value_counts().value_counts()
# 모든 조사지점에서 20번의 속성조사가 이루어짐
```




    20    1000
    Name: 조사지점코드, dtype: int64




```python
속성조사.조사요일.value_counts()
```




    금    10000
    토    10000
    Name: 조사요일, dtype: int64




```python
속성조사.pivot_table(index = '조사지점코드', columns = '조사요일',
                values = 'ID속성조사', aggfunc='count')
속성조사
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID속성조사</th>
      <th>조사지점코드</th>
      <th>조사일자</th>
      <th>조사요일</th>
      <th>남여구분</th>
      <th>조사시간대</th>
      <th>조사시간대_텍스트</th>
      <th>연령대</th>
      <th>거주지</th>
      <th>통행주목적</th>
      <th>방문횟수</th>
      <th>동행자명</th>
      <th>교통수단</th>
      <th>보행환경</th>
      <th>직업명</th>
      <th>년도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오전11시~오후2시</td>
      <td>50-54세</td>
      <td>종로구</td>
      <td>업무관련</td>
      <td>주1~2회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간만족</td>
      <td>전문/자유직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전11시~오후2시</td>
      <td>60-64세</td>
      <td>성북구</td>
      <td>업무관련</td>
      <td>주3~5회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>매우만족</td>
      <td>일용/작업직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전11시~오후2시</td>
      <td>65세이상</td>
      <td>종로구</td>
      <td>업무관련</td>
      <td>주3~5회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간만족</td>
      <td>일용/작업직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>45-49세</td>
      <td>서대문구</td>
      <td>출근</td>
      <td>매일</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간만족</td>
      <td>사무/기술직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>35-39세</td>
      <td>도봉구</td>
      <td>출근</td>
      <td>매일</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>매우만족</td>
      <td>사무/기술직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>19995</th>
      <td>19996</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오후5시~8시</td>
      <td>20-24세</td>
      <td>NaN</td>
      <td>여가/오락/친교/모임/식사(회식,음료포함)</td>
      <td>오늘처음</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>보통</td>
      <td>(대)학생</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>19996</th>
      <td>19997</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오후5시~8시</td>
      <td>45-49세</td>
      <td>강동구</td>
      <td>여가/오락/친교/모임/식사(회식,음료포함)</td>
      <td>6개월1~3회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>보통</td>
      <td>(전업)주부</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>19997</th>
      <td>19998</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>45-49세</td>
      <td>강동구</td>
      <td>회사또는근무지(사업장등)로복귀</td>
      <td>6개월1~3회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>보통</td>
      <td>판매/서비스직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>19998</th>
      <td>19999</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>40-44세</td>
      <td>강동구</td>
      <td>출근</td>
      <td>주1~2회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간불만족</td>
      <td>일용/작업직</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>19999</th>
      <td>20000</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오후5시~8시</td>
      <td>45-49세</td>
      <td>강동구</td>
      <td>개인용무/집안일(병원,은행,관공서,종교활동,봉사활동등)</td>
      <td>월1~2회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>매우불만족</td>
      <td>사무/기술직</td>
      <td>2015</td>
    </tr>
  </tbody>
</table>
<p>20000 rows × 16 columns</p>
</div>




```python
속성조사.보행환경.value_counts().sort_index()
```




    매우만족      772
    매우불만족    2388
    보통       9533
    약간만족     2563
    약간불만족    4744
    Name: 보행환경, dtype: int64




```python
속성조사['보행점수'] = 속성조사.보행환경.map({
    '매우불만족':1,
    '약간불만족':2,
    '보통':3,
    '약간만족':4,
    '매우만족':5
})
```


```python
속성조사
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID속성조사</th>
      <th>조사지점코드</th>
      <th>조사일자</th>
      <th>조사요일</th>
      <th>남여구분</th>
      <th>조사시간대</th>
      <th>조사시간대_텍스트</th>
      <th>연령대</th>
      <th>거주지</th>
      <th>통행주목적</th>
      <th>방문횟수</th>
      <th>동행자명</th>
      <th>교통수단</th>
      <th>보행환경</th>
      <th>직업명</th>
      <th>년도</th>
      <th>보행점수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오전11시~오후2시</td>
      <td>50-54세</td>
      <td>종로구</td>
      <td>업무관련</td>
      <td>주1~2회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간만족</td>
      <td>전문/자유직</td>
      <td>2015</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전11시~오후2시</td>
      <td>60-64세</td>
      <td>성북구</td>
      <td>업무관련</td>
      <td>주3~5회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>매우만족</td>
      <td>일용/작업직</td>
      <td>2015</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전11시~오후2시</td>
      <td>65세이상</td>
      <td>종로구</td>
      <td>업무관련</td>
      <td>주3~5회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간만족</td>
      <td>일용/작업직</td>
      <td>2015</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>45-49세</td>
      <td>서대문구</td>
      <td>출근</td>
      <td>매일</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간만족</td>
      <td>사무/기술직</td>
      <td>2015</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>01-003</td>
      <td>1016</td>
      <td>금</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>35-39세</td>
      <td>도봉구</td>
      <td>출근</td>
      <td>매일</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>매우만족</td>
      <td>사무/기술직</td>
      <td>2015</td>
      <td>5</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>19995</th>
      <td>19996</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오후5시~8시</td>
      <td>20-24세</td>
      <td>NaN</td>
      <td>여가/오락/친교/모임/식사(회식,음료포함)</td>
      <td>오늘처음</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>보통</td>
      <td>(대)학생</td>
      <td>2015</td>
      <td>3</td>
    </tr>
    <tr>
      <th>19996</th>
      <td>19997</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오후5시~8시</td>
      <td>45-49세</td>
      <td>강동구</td>
      <td>여가/오락/친교/모임/식사(회식,음료포함)</td>
      <td>6개월1~3회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>보통</td>
      <td>(전업)주부</td>
      <td>2015</td>
      <td>3</td>
    </tr>
    <tr>
      <th>19997</th>
      <td>19998</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>45-49세</td>
      <td>강동구</td>
      <td>회사또는근무지(사업장등)로복귀</td>
      <td>6개월1~3회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>보통</td>
      <td>판매/서비스직</td>
      <td>2015</td>
      <td>3</td>
    </tr>
    <tr>
      <th>19998</th>
      <td>19999</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>여자</td>
      <td>NaN</td>
      <td>오전7시30분~11시</td>
      <td>40-44세</td>
      <td>강동구</td>
      <td>출근</td>
      <td>주1~2회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>약간불만족</td>
      <td>일용/작업직</td>
      <td>2015</td>
      <td>2</td>
    </tr>
    <tr>
      <th>19999</th>
      <td>20000</td>
      <td>25-463</td>
      <td>1031</td>
      <td>토</td>
      <td>남자</td>
      <td>NaN</td>
      <td>오후5시~8시</td>
      <td>45-49세</td>
      <td>강동구</td>
      <td>개인용무/집안일(병원,은행,관공서,종교활동,봉사활동등)</td>
      <td>월1~2회</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>매우불만족</td>
      <td>사무/기술직</td>
      <td>2015</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>20000 rows × 17 columns</p>
</div>




```python
# 보행환경 개선이 시급한 지역
# 보행점수와 유동인구를 함께 고려
```


```python
지점별보행점수 = 속성조사.pivot_table(index = '조사지점코드', values = '보행점수',
                aggfunc='mean')
```


```python
지점별보행점수
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>보행점수</th>
    </tr>
    <tr>
      <th>조사지점코드</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>01-003</th>
      <td>3.90</td>
    </tr>
    <tr>
      <th>01-005</th>
      <td>2.35</td>
    </tr>
    <tr>
      <th>01-008</th>
      <td>2.60</td>
    </tr>
    <tr>
      <th>01-009</th>
      <td>3.05</td>
    </tr>
    <tr>
      <th>01-016</th>
      <td>2.60</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>25-242</th>
      <td>2.75</td>
    </tr>
    <tr>
      <th>25-408</th>
      <td>2.75</td>
    </tr>
    <tr>
      <th>25-430</th>
      <td>1.70</td>
    </tr>
    <tr>
      <th>25-434</th>
      <td>3.80</td>
    </tr>
    <tr>
      <th>25-463</th>
      <td>2.60</td>
    </tr>
  </tbody>
</table>
<p>1000 rows × 1 columns</p>
</div>




```python
지점별유동인구 = 최종데이터.pivot_table(index = '조사지점코드', values = '유동인구수',
                aggfunc='mean')
지점별유동인구
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>유동인구수</th>
    </tr>
    <tr>
      <th>조사지점코드</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>01-003</th>
      <td>41.357143</td>
    </tr>
    <tr>
      <th>01-004</th>
      <td>198.171429</td>
    </tr>
    <tr>
      <th>01-005</th>
      <td>150.128571</td>
    </tr>
    <tr>
      <th>01-008</th>
      <td>75.942857</td>
    </tr>
    <tr>
      <th>01-009</th>
      <td>80.528571</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>25-408</th>
      <td>1548.042857</td>
    </tr>
    <tr>
      <th>25-430</th>
      <td>1371.985714</td>
    </tr>
    <tr>
      <th>25-434</th>
      <td>114.085714</td>
    </tr>
    <tr>
      <th>25-463</th>
      <td>218.100000</td>
    </tr>
    <tr>
      <th>25-815</th>
      <td>602.014286</td>
    </tr>
  </tbody>
</table>
<p>1212 rows × 1 columns</p>
</div>




```python
ex5 = pd.concat([지점별보행점수, 지점별유동인구], axis=1, join='inner') # 기본값=없는값도Nan으로포함=outer
ex5                                                                     # merge는 기본값이 inner (반대)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>보행점수</th>
      <th>유동인구수</th>
    </tr>
    <tr>
      <th>조사지점코드</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>01-003</th>
      <td>3.90</td>
      <td>41.357143</td>
    </tr>
    <tr>
      <th>01-005</th>
      <td>2.35</td>
      <td>150.128571</td>
    </tr>
    <tr>
      <th>01-008</th>
      <td>2.60</td>
      <td>75.942857</td>
    </tr>
    <tr>
      <th>01-009</th>
      <td>3.05</td>
      <td>80.528571</td>
    </tr>
    <tr>
      <th>01-016</th>
      <td>2.60</td>
      <td>889.542857</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>25-242</th>
      <td>2.75</td>
      <td>328.200000</td>
    </tr>
    <tr>
      <th>25-408</th>
      <td>2.75</td>
      <td>1548.042857</td>
    </tr>
    <tr>
      <th>25-430</th>
      <td>1.70</td>
      <td>1371.985714</td>
    </tr>
    <tr>
      <th>25-434</th>
      <td>3.80</td>
      <td>114.085714</td>
    </tr>
    <tr>
      <th>25-463</th>
      <td>2.60</td>
      <td>218.100000</td>
    </tr>
  </tbody>
</table>
<p>992 rows × 2 columns</p>
</div>




```python
ex5.info()
```

    <class 'pandas.core.frame.DataFrame'>
    Index: 992 entries, 01-003 to 25-463
    Data columns (total 2 columns):
     #   Column  Non-Null Count  Dtype  
    ---  ------  --------------  -----  
     0   보행점수    992 non-null    float64
     1   유동인구수   992 non-null    float64
    dtypes: float64(2)
    memory usage: 23.2+ KB
    


```python
# 보행점수가 2점 미만인 지역 중 유동인구가 많은 10개 지역 선정
개선시급지역 = ex5[ex5.보행점수 < 2].nlargest(10, '유동인구수')
```


```python
개선시급지역
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>보행점수</th>
      <th>유동인구수</th>
    </tr>
    <tr>
      <th>조사지점코드</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>01-213</th>
      <td>1.95</td>
      <td>3368.914286</td>
    </tr>
    <tr>
      <th>17-2055</th>
      <td>1.45</td>
      <td>3242.828571</td>
    </tr>
    <tr>
      <th>01-2095</th>
      <td>1.20</td>
      <td>2193.857143</td>
    </tr>
    <tr>
      <th>23-076</th>
      <td>1.90</td>
      <td>1928.142857</td>
    </tr>
    <tr>
      <th>01-084</th>
      <td>1.85</td>
      <td>1831.928571</td>
    </tr>
    <tr>
      <th>02-260</th>
      <td>1.70</td>
      <td>1810.328571</td>
    </tr>
    <tr>
      <th>17-082</th>
      <td>1.70</td>
      <td>1572.342857</td>
    </tr>
    <tr>
      <th>01-082</th>
      <td>1.90</td>
      <td>1502.528571</td>
    </tr>
    <tr>
      <th>23-034</th>
      <td>1.35</td>
      <td>1389.728571</td>
    </tr>
    <tr>
      <th>25-430</th>
      <td>1.70</td>
      <td>1371.985714</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 개선시급지역을 지도에 시각화
개선시급지역= 개선시급지역.reset_index()
```


```python
개선시급지역 = pd.merge(개선시급지역, 조사지점[['조사지점코드','조사지점명','X좌표','Y좌표']])
개선시급지역
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>조사지점코드</th>
      <th>보행점수</th>
      <th>유동인구수</th>
      <th>조사지점명</th>
      <th>X좌표</th>
      <th>Y좌표</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01-213</td>
      <td>1.95</td>
      <td>3368.914286</td>
      <td>cafe nanuri</td>
      <td>198528.06633</td>
      <td>453727.84806</td>
    </tr>
    <tr>
      <th>1</th>
      <td>17-2055</td>
      <td>1.45</td>
      <td>3242.828571</td>
      <td>디큐브시티</td>
      <td>190016.40000</td>
      <td>445484.99021</td>
    </tr>
    <tr>
      <th>2</th>
      <td>01-2095</td>
      <td>1.20</td>
      <td>2193.857143</td>
      <td>동아일보</td>
      <td>198026.60682</td>
      <td>452265.43991</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23-076</td>
      <td>1.90</td>
      <td>1928.142857</td>
      <td>코끼리상가</td>
      <td>202812.00572</td>
      <td>447645.09507</td>
    </tr>
    <tr>
      <th>4</th>
      <td>01-084</td>
      <td>1.85</td>
      <td>1831.928571</td>
      <td>광화문 빌딩</td>
      <td>197893.71130</td>
      <td>452255.02517</td>
    </tr>
    <tr>
      <th>5</th>
      <td>02-260</td>
      <td>1.70</td>
      <td>1810.328571</td>
      <td>스타벅스</td>
      <td>198571.61688</td>
      <td>451327.19366</td>
    </tr>
    <tr>
      <th>6</th>
      <td>17-082</td>
      <td>1.70</td>
      <td>1572.342857</td>
      <td>자전거 주차장</td>
      <td>190463.23371</td>
      <td>445313.73349</td>
    </tr>
    <tr>
      <th>7</th>
      <td>01-082</td>
      <td>1.90</td>
      <td>1502.528571</td>
      <td>준코 뮤직타운</td>
      <td>198721.18954</td>
      <td>452307.83355</td>
    </tr>
    <tr>
      <th>8</th>
      <td>23-034</td>
      <td>1.35</td>
      <td>1389.728571</td>
      <td>capital tower 앞</td>
      <td>203045.16639</td>
      <td>444620.39654</td>
    </tr>
    <tr>
      <th>9</th>
      <td>25-430</td>
      <td>1.70</td>
      <td>1371.985714</td>
      <td>신동아생활용품DC마트</td>
      <td>211375.75228</td>
      <td>450168.33297</td>
    </tr>
  </tbody>
</table>
</div>




```python
from pyproj import Proj, transform
def convert_loc(x,y):
    inProj = Proj(init='epsg:5181')
    outProj = Proj(init='epsg:4326')
    x2, y2 = transform(inProj, outProj, x, y)
    return [y2, x2]
```


```python
import warnings
warnings.filterwarnings("ignore")
```


```python
개선시급지역['위경도']=개선시급지역.apply(lambda 최종데이터: convert_loc(최종데이터.X좌표, 최종데이터.Y좌표), axis=1)
개선시급지역
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>조사지점코드</th>
      <th>보행점수</th>
      <th>유동인구수</th>
      <th>조사지점명</th>
      <th>X좌표</th>
      <th>Y좌표</th>
      <th>위경도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01-213</td>
      <td>1.95</td>
      <td>3368.914286</td>
      <td>cafe nanuri</td>
      <td>198528.06633</td>
      <td>453727.84806</td>
      <td>[37.58310456094619, 126.98333547159028]</td>
    </tr>
    <tr>
      <th>1</th>
      <td>17-2055</td>
      <td>1.45</td>
      <td>3242.828571</td>
      <td>디큐브시티</td>
      <td>190016.40000</td>
      <td>445484.99021</td>
      <td>[37.50878369212982, 126.8870826364644]</td>
    </tr>
    <tr>
      <th>2</th>
      <td>01-2095</td>
      <td>1.20</td>
      <td>2193.857143</td>
      <td>동아일보</td>
      <td>198026.60682</td>
      <td>452265.43991</td>
      <td>[37.56992740808484, 126.97766212376528]</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23-076</td>
      <td>1.90</td>
      <td>1928.142857</td>
      <td>코끼리상가</td>
      <td>202812.00572</td>
      <td>447645.09507</td>
      <td>[37.528295993738254, 127.03181287428026]</td>
    </tr>
    <tr>
      <th>4</th>
      <td>01-084</td>
      <td>1.85</td>
      <td>1831.928571</td>
      <td>광화문 빌딩</td>
      <td>197893.71130</td>
      <td>452255.02517</td>
      <td>[37.569833277541, 126.9761578394427]</td>
    </tr>
    <tr>
      <th>5</th>
      <td>02-260</td>
      <td>1.70</td>
      <td>1810.328571</td>
      <td>스타벅스</td>
      <td>198571.61688</td>
      <td>451327.19366</td>
      <td>[37.56147485263183, 126.98383320628312]</td>
    </tr>
    <tr>
      <th>6</th>
      <td>17-082</td>
      <td>1.70</td>
      <td>1572.342857</td>
      <td>자전거 주차장</td>
      <td>190463.23371</td>
      <td>445313.73349</td>
      <td>[37.50724538640684, 126.89213866497093]</td>
    </tr>
    <tr>
      <th>7</th>
      <td>01-082</td>
      <td>1.90</td>
      <td>1502.528571</td>
      <td>준코 뮤직타운</td>
      <td>198721.18954</td>
      <td>452307.83355</td>
      <td>[37.57031059866805, 126.98552439699829]</td>
    </tr>
    <tr>
      <th>8</th>
      <td>23-034</td>
      <td>1.35</td>
      <td>1389.728571</td>
      <td>capital tower 앞</td>
      <td>203045.16639</td>
      <td>444620.39654</td>
      <td>[37.501042607485395, 127.03443814970538]</td>
    </tr>
    <tr>
      <th>9</th>
      <td>25-430</td>
      <td>1.70</td>
      <td>1371.985714</td>
      <td>신동아생활용품DC마트</td>
      <td>211375.75228</td>
      <td>450168.33297</td>
      <td>[37.55096447551782, 127.12873547021874]</td>
    </tr>
  </tbody>
</table>
</div>




```python
for x, y in 개선시급지역.위경도:
    print(type(x))
```

    <class 'float'>
    <class 'float'>
    <class 'float'>
    <class 'float'>
    <class 'float'>
    <class 'float'>
    <class 'float'>
    <class 'float'>
    <class 'float'>
    <class 'float'>
    


```python
for idx, val in 개선시급지역.iterrows():
    print(val.위경도)
```

    [37.58310456094619, 126.98333547159028]
    [37.50878369212982, 126.8870826364644]
    [37.56992740808484, 126.97766212376528]
    [37.528295993738254, 127.03181287428026]
    [37.569833277541, 126.9761578394427]
    [37.56147485263183, 126.98383320628312]
    [37.50724538640684, 126.89213866497093]
    [37.57031059866805, 126.98552439699829]
    [37.501042607485395, 127.03443814970538]
    [37.55096447551782, 127.12873547021874]
    


```python
map4 = folium.Map(location=[37.566535, 126.9779691999996], zoom_start=10,
                  zoom_control=False, control_scale=True,
                  tiles='https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png',
                  attr='&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors')
map4
```




![png](/assets/images/90.png)




```python
from folium.plugins import MarkerCluster
marker_cluster = MarkerCluster().add_to(map4)
```


```python
for idx, val in 개선시급지역.iterrows():
    #print(val)
    folium.Marker(location=val.위경도, popup=folium.Popup(val.조사지점명, max_width=300))\
    .add_to(marker_cluster)
map4
```




![png](/assets/images/92.png)




```python
from folium.plugins import MarkerCluster
marker_cluster = MarkerCluster().add_to(map4)
```


```python
for idx, val in 개선시급지역.iterrows():
    #print(val)
    msg = '조사지점명:{0}<br> 유동인구수:{1}<br> 보행점수:{2}'.format(val.조사지점명, val.유동인구수, val.보행점수)
    folium.Marker(location=val.위경도, popup=folium.Popup(msg, max_width=300))\
    .add_to(marker_cluster)
map4
```




![png](/assets/images/94.png)



### 5.2 구별 보행환경점수 지도 시각화


```python
ex5 = ex5.reset_index()
ex5
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>조사지점코드</th>
      <th>보행점수</th>
      <th>유동인구수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01-003</td>
      <td>3.90</td>
      <td>41.357143</td>
    </tr>
    <tr>
      <th>1</th>
      <td>01-005</td>
      <td>2.35</td>
      <td>150.128571</td>
    </tr>
    <tr>
      <th>2</th>
      <td>01-008</td>
      <td>2.60</td>
      <td>75.942857</td>
    </tr>
    <tr>
      <th>3</th>
      <td>01-009</td>
      <td>3.05</td>
      <td>80.528571</td>
    </tr>
    <tr>
      <th>4</th>
      <td>01-016</td>
      <td>2.60</td>
      <td>889.542857</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>987</th>
      <td>25-242</td>
      <td>2.75</td>
      <td>328.200000</td>
    </tr>
    <tr>
      <th>988</th>
      <td>25-408</td>
      <td>2.75</td>
      <td>1548.042857</td>
    </tr>
    <tr>
      <th>989</th>
      <td>25-430</td>
      <td>1.70</td>
      <td>1371.985714</td>
    </tr>
    <tr>
      <th>990</th>
      <td>25-434</td>
      <td>3.80</td>
      <td>114.085714</td>
    </tr>
    <tr>
      <th>991</th>
      <td>25-463</td>
      <td>2.60</td>
      <td>218.100000</td>
    </tr>
  </tbody>
</table>
<p>992 rows × 3 columns</p>
</div>




```python
ex5 = pd.merge(ex5, 조사지점[['조사지점코드','구코드']], on='조사지점코드')
```


```python
ex5 = pd.merge(ex5, 구코드[['구코드','구명']])
ex5
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>조사지점코드</th>
      <th>보행점수</th>
      <th>유동인구수</th>
      <th>구코드</th>
      <th>구명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01-003</td>
      <td>3.90</td>
      <td>41.357143</td>
      <td>11010.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1</th>
      <td>01-005</td>
      <td>2.35</td>
      <td>150.128571</td>
      <td>11010.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>2</th>
      <td>01-008</td>
      <td>2.60</td>
      <td>75.942857</td>
      <td>11010.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>3</th>
      <td>01-009</td>
      <td>3.05</td>
      <td>80.528571</td>
      <td>11010.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>4</th>
      <td>01-016</td>
      <td>2.60</td>
      <td>889.542857</td>
      <td>11010.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>987</th>
      <td>25-242</td>
      <td>2.75</td>
      <td>328.200000</td>
      <td>11250.0</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>988</th>
      <td>25-408</td>
      <td>2.75</td>
      <td>1548.042857</td>
      <td>11250.0</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>989</th>
      <td>25-430</td>
      <td>1.70</td>
      <td>1371.985714</td>
      <td>11250.0</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>990</th>
      <td>25-434</td>
      <td>3.80</td>
      <td>114.085714</td>
      <td>11250.0</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>991</th>
      <td>25-463</td>
      <td>2.60</td>
      <td>218.100000</td>
      <td>11250.0</td>
      <td>강동구</td>
    </tr>
  </tbody>
</table>
<p>992 rows × 5 columns</p>
</div>




```python
구별보행점수 = ex5.pivot_table(index='구명', values='보행점수', aggfunc='mean')
구별보행점수
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>보행점수</th>
    </tr>
    <tr>
      <th>구명</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>강남구</th>
      <td>2.455072</td>
    </tr>
    <tr>
      <th>강동구</th>
      <td>2.646774</td>
    </tr>
    <tr>
      <th>강북구</th>
      <td>2.646296</td>
    </tr>
    <tr>
      <th>강서구</th>
      <td>2.765517</td>
    </tr>
    <tr>
      <th>관악구</th>
      <td>2.843548</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>2.961765</td>
    </tr>
    <tr>
      <th>구로구</th>
      <td>2.250000</td>
    </tr>
    <tr>
      <th>금천구</th>
      <td>2.697368</td>
    </tr>
    <tr>
      <th>노원구</th>
      <td>2.920161</td>
    </tr>
    <tr>
      <th>도봉구</th>
      <td>3.002000</td>
    </tr>
    <tr>
      <th>동대문구</th>
      <td>2.853571</td>
    </tr>
    <tr>
      <th>동작구</th>
      <td>2.700000</td>
    </tr>
    <tr>
      <th>마포구</th>
      <td>2.750000</td>
    </tr>
    <tr>
      <th>서대문구</th>
      <td>2.900000</td>
    </tr>
    <tr>
      <th>서초구</th>
      <td>2.605797</td>
    </tr>
    <tr>
      <th>성동구</th>
      <td>2.571667</td>
    </tr>
    <tr>
      <th>성북구</th>
      <td>2.866667</td>
    </tr>
    <tr>
      <th>송파구</th>
      <td>2.733333</td>
    </tr>
    <tr>
      <th>양천구</th>
      <td>2.814286</td>
    </tr>
    <tr>
      <th>영등포구</th>
      <td>2.490566</td>
    </tr>
    <tr>
      <th>용산구</th>
      <td>2.867500</td>
    </tr>
    <tr>
      <th>은평구</th>
      <td>2.817241</td>
    </tr>
    <tr>
      <th>종로구</th>
      <td>2.600000</td>
    </tr>
    <tr>
      <th>중구</th>
      <td>2.802000</td>
    </tr>
    <tr>
      <th>중랑구</th>
      <td>3.145946</td>
    </tr>
  </tbody>
</table>
</div>




```python
import json
with open('data/seoul_muncipalities_geo.json', encoding='utf-8') as file:
    geo=json.loads(file.read())
    file.close()
```


```python
map2 = folium.Map(location=[37.566535, 126.9779691999996], zoom_start=10,
                  zoom_control=False, control_scale=True,
                  tiles='https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png',
                  attr='&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors')
map2
```




![png](/assets/images/100.png)




```python
구별보행점수 = 구별보행점수.reset_index()
```


```python
folium.Choropleth(geo_data = geo,
                 name = 'choropleth',
                 data = 구별보행점수,
                 columns = ['구명','보행점수'],
                 key_on = 'feature.properties.SIG_KOR_NM',
                 legend_name = '보행점수',
                 fill_color = 'BuPu',
                 highlight = True
                 ).add_to(map2)
```




    <folium.features.Choropleth at 0x2b3c6e29408>




```python
choro.geojson.add_child(
    folium.features.GeoJsonTooltip(['SIG_KOR_NM'], labels=False))
```




    <folium.features.GeoJson at 0x2b3c4918988>




```python
map2
```




![png](/assets/images/104.png)




```python

```
